<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.10 (454267)"/><meta name="author" content="ç®¡ä¼Ÿ"/><meta name="created" content="2016-12-29 07:23:21 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2016-12-29 10:28:17 +0000"/><title>string_decoder æ¨¡å—è¯¦è§£</title></head><body><style>
    a { color: #43B0D6 !important; }
    a:visited { color: #7b7ed2 !important; }
    .title-p { font-size:12px; color:gray; }
    .title-hr { margin-bottom: 20px; }
    .tail-hr { margin-top: 20px; }
    .tail-licenses { border:1px dashed lightgray; margin:20px 0 20px 0; padding:20px; font-size:14px; }
</style>
<h2>string_decoder æ¨¡å—è¯¦è§£</h2>
<p class="title-p">ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å(<a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">åˆ›æ„å…±äº«3.0è®¸å¯è¯</a>)</p>
<p class="title-p">æ–‡ç« ä½œè€…ï¼šPooky (<a href="mailto:guananddu@icloud.com">guananddu@icloud.com</a>)</p>
<hr class="title-hr"><div>string_decoder æ¨¡å—åœ¨ Buffer åŠ Stream ä¸­çš„åº”ç”¨éå¸¸å¤šï¼Œæ‰€ä»¥å…ˆæ¥åˆ†æä¸€ä¸‹è¿™ä¸ªæœ‰æ„æ€çš„å°æ¨¡å—ï¼Œè§å®˜æ–¹å®ä¾‹ï¼š</div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:13.5pt;"><span style="color:#808080;">// In the following example, the three UTF-8 encoded bytes of<br/></span><span style="color:#808080;">// the European Euro symbol (â‚¬) are written over three separate operations:<br/></span><span style="color:#808080;"><br/></span><span style="color:#cc7832;font-weight:bold;">const </span>StringDecoder = require( <span style="color:#6a8759;">'string_decoder' </span>).<span style="color:#ffc66d;">StringDecoder</span><span style="color:#cc7832;">;<br/></span><span style="color:#cc7832;font-weight:bold;">const </span>decoder = <span style="color:#cc7832;font-weight:bold;">new </span>StringDecoder( <span style="color:#6a8759;">'utf8' </span>)<span style="color:#cc7832;">;<br/></span><span style="color:#cc7832;"><br/></span>decoder.<span style="color:#ffc66d;">write</span>( Buffer.<span style="color:#ffc66d;">from</span>( [ <span style="color:#6897bb;">0xE2 </span>] ) )<span style="color:#cc7832;">;<br/></span>decoder.<span style="color:#ffc66d;">write</span>( Buffer.<span style="color:#ffc66d;">from</span>( [ <span style="color:#6897bb;">0x82 </span>] ) )<span style="color:#cc7832;">;<br/></span><span style="color:#9876aa;">console</span>.<span style="color:#ffc66d;">log</span>( decoder.<span style="color:#ffc66d;">end</span>( Buffer.<span style="color:#ffc66d;">from</span>( [ <span style="color:#6897bb;">0xAC </span>] ) ) )<span style="color:#cc7832;">;</span>
</pre></div><div>æŒ‰ç…§æ–‡æ¡£çš„è¯´æ³•ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">When a Buffer instance is written to the StringDecoder instance, an internal buffer is used to ensure that the decoded string does not contain any incomplete multibyte characters. These are held in the buffer until the next call to stringDecoder.write() or until stringDecoder.end() is called.</font><br/></div></div><div><br/></div><div>string_decoder çš„ä¼šé€šè¿‡ internal buffer æ¥ä¿è¯è¾“å‡ºå¤šå­—èŠ‚å­—ç¬¦çš„å®Œæ•´æ€§ã€‚</div><div><br/></div><div>æ¥çœ‹æ„é€ å‡½æ•°çš„è°ƒç”¨ï¼Œnew StringDecoder( 'utf8'Â )ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">function StringDecoder(encoding) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // ç¡®ä¿è¾“å…¥çš„ç¼–ç å­—ç¬¦ä¸²æ˜¯æ­£ç¡®æ— è¯¯çš„</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â this.encoding = normalizeEncoding(encoding);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var nb;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â switch (this.encoding) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â case 'utf16le':</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  Â  Â  . . .</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  Â  // åªä»¥ utf8 ç¼–ç ä¸ºä¾‹</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â case 'utf8â€™:</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â Â  Â <span>Â  // æŒ‡å‘ä¸€ä¸ªå†…éƒ¨å‡½æ•°</span></span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.fillLast = utf8FillLast;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  Â  Â  // éœ€è¦çš„æœ€å¤§å­—èŠ‚å¤§å°</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â Â Â nb = 4;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â Â Â break;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  Â  . . .</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â }</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â this.lastNeed = 0;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â this.lastTotal = 0;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // åˆ›å»ºä¸€ä¸ª internal BufferÂ <font style="font-size: 12px; color: rgb(51, 51, 51);">Uint8Array[4]</font></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â this.lastChar = Buffer.allocUnsafe(nb);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">}</font><br/></div></div><div><br/></div><div>ä¸Šè¿°æ„é€ å‡½æ•°ä¸»è¦åšçš„å·¥ä½œï¼š1âƒ£ï¸ç¡®è®¤ç¼–ç è®¾ç½®æ— è¯¯ï¼›2âƒ£ï¸è®¾ç½® fillLast å‡½æ•°æŒ‡é’ˆï¼›3âƒ£ï¸åˆå§‹åŒ– internal buffer å®ä¾‹å¯¹è±¡ï¼›</div><div><br/></div><div>ç»§ç»­å¾€ä¸‹èµ°ï¼Œçœ‹ decoder.write å‡½æ•°çš„è°ƒç”¨ï¼ˆ StringDecoder.prototype.writeÂ ï¼‰ï¼Œé¦–å…ˆæ˜¯ä¸Šè¿°æµ‹è¯•ä»£ç ä¸­çš„ç¬¬ä¸€ä¸ª write è°ƒç”¨ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">StringDecoder.prototype.write = function(buf) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // buf: Uint8Array[1]</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  // buf[0] == 226 [0xE2]</span><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span><span>Â  // buf.byteLength == 1</span><br/></span></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span><span>Â  // buf.length == 1</span></span></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (buf.length === 0)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return '';</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var r;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var i;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // ç¬¬ä¸€æ¬¡è¿›æ¥ä¸º 0</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (this.lastNeed) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â r = this.fillLast(buf);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â if (r === undefined)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â Â Â return '';</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â i = this.lastNeed;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â this.lastNeed = 0;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â } else {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â i = 0;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â }</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // èµ°å…¥ä¸‹åˆ—åˆ†æ”¯ r === undefined</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  // æ‰€ä»¥ç»§ç»­èµ°å…¥ this.text( buf, iÂ ) è°ƒç”¨</span><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (i &lt; buf.length)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return (r ? r + this.text(buf, i) : this.text(buf, i));</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â return r || '';</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">};</font><br/></div></div><div><br/></div><div>ä¸Šè¿°ä»£ç ä¸­çš„ this.text æŒ‡å‘ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>StringDecoder.prototype.text = utf8Text;</div></div><div><br/></div><div>æ¥çœ‹çœ‹ utf8Text å…·ä½“æ€ä¹ˆè°ƒç”¨ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// partial character, the character's bytes are buffered until the required</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// number of bytes are available.ã€æ³¨æ„è¿™é‡Œçš„æ³¨é‡Šã€‘</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">function utf8Text(buf, i) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // buf, i === 0</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  // total æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦æ€»å­—èŠ‚é•¿åº¦</span><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â const total = utf8CheckIncomplete(this, buf, i);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // å¦‚æœè¾“å…¥ buf çš„æœ€åä¸€ä¸ªå­—èŠ‚å·²ç»å®Œæ•´ï¼Œåˆ™ç›´æ¥ toString è¿”å›</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (!this.lastNeed)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return buf.toString('utf8', i);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // è®°å½•æ€»å­—èŠ‚é•¿</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â this.lastTotal = total;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // buf.length == 1</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  // end == ( 1 - ( 3 - 2 )Â ) == 0</span><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â const end = buf.length - (total - this.lastNeed);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // this.lastChar å³ä¸º internal buffer çš„æŒ‡é’ˆ</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  // buf.copy æ˜¯ä¸€ä¸ª c++ åº•å±‚å‡½æ•°ï¼Œå‚æ•°å®šä¹‰ä¸ºï¼š</span><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  //Â <font style="font-size: 12px; color: rgb(51, 51, 51);">CHECK_NOT_OOB(ParseArrayIndex(args[1], 0, &amp;target_start));</font></span></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // CHECK_NOT_OOB(ParseArrayIndex(args[2], 0, &amp;source_start));</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // CHECK_NOT_OOB(ParseArrayIndex(args[3], ts_obj_length, &amp;source_end));</font><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span/><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â buf.copy(this.lastChar, 0, end);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // buf.toString å‚æ•°å®šä¹‰ä¸ºï¼š<font style="font-size: 12px; color: rgb(51, 51, 51);">buf.toString([encoding[, start[, end]]])</font></span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // å…³äº end:Â <font style="font-size: 12px; color: rgb(51, 51, 51);">end &lt;Integer&gt; The byte offset to stop decoding at (not inclusiveã€ä¸åŒ…æ‹¬ã€‘). Default: buf.length</font></span><br/></font></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // å½“ end === 0 æ—¶ï¼Œ Buffer.toString ç›´æ¥è¿”å›ç©ºå­—ç¬¦ä¸²</span><br/></font></span></font></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  // è¯¦è§ Buffer æ¨¡å—ä¸­çš„å†…éƒ¨å‡½æ•°ï¼šslowToString å‡½æ•°è°ƒç”¨</span><br/></span></font></span></font></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span><span>Â  // ğŸŒŸ æ•…ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ StringDecoder.prototype.write( 0xE2Â ) ç›´æ¥è¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºå½“å‰ utf8 å­—ç¬¦ç¼–ç è¿˜æœªç»“æŸ</span></span></span></font></span></font></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â return buf.toString('utf8', i, end);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">}</font><br/></div></div><div><br/></div><div>ã€æ’æ›²ã€‘utf8CheckIncomplete å‡½æ•°ä¼šæ£€æŸ¥ç›®å‰å¤šå­—èŠ‚å­—ç¬¦ç¼–ç æ˜¯ä¸æ˜¯å·²ç»å®Œæ•´ï¼Œå›å¿†ä¸€ä¸‹ Unicode é‡‡ç”¨ utf-8 ç¼–ç çš„è§„èŒƒï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Unicodeç¬¦å·èŒƒå›´Â Â Â Â Â Â | UTF-8ç¼–ç æ–¹å¼</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">(åå…­è¿›åˆ¶)Â Â Â Â Â Â Â Â Â Â Â | ï¼ˆäºŒè¿›åˆ¶ï¼‰</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">--------------------+---------------------------------------------</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">0000 0000-0000 007F | ã€å•å­—èŠ‚ã€‘0xxxxxxx</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">0000 0080-0000 07FF | ã€åŒå­—èŠ‚ã€‘110xxxxx 10xxxxxx</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">0000 0800-0000 FFFF | ã€ä¸‰å­—èŠ‚ã€‘1110xxxx 10xxxxxx 10xxxxxx</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">0001 0000-0010 FFFF | ã€å››å­—èŠ‚ã€‘11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</font></div></div><div><br/></div><div>æ•…ï¼Œè‹¥æŸå­—èŠ‚æ˜¯ 0 å¼€å¤´ï¼Œåˆ™å¯ä»¥ç¡®å®šä¸€å®šæ˜¯å•å­—èŠ‚ utf8 å­—ç¬¦ï¼›11 å¼€å¤´ä¸ºåŒå­—èŠ‚å¼€å§‹ï¼›111 å¼€å¤´ä¸ºä¸‰å­—èŠ‚å¼€å§‹ï¼›1111 ä¸ºå››å­—èŠ‚å¼€å§‹ï¼›è€Œ 10 å¼€å¤´ï¼Œåˆ™è‚¯å®šæ˜¯ç¼–ç ä¸­é—´æŸå­—èŠ‚æˆ–è€…æœ€åä¸€ä¸ªå­—èŠ‚ã€‚</div><div><br/></div><div>æ¥çœ‹ utf8CheckIncomplete å‡½æ•°è°ƒç”¨ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ä¼ å…¥çš„æ˜¯ 0xE2( 1110 0010Â ) å¯çŸ¥å…¶ä¸ºä¸‰å­—èŠ‚ utf8 ç¼–ç å¼€å§‹å­—èŠ‚ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// Checks at most 3 bytes at the end of a Buffer in order to detect an</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// needed to complete the UTF-8 character (if applicable) are returned.</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">function utf8CheckIncomplete(self, buf, i) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // æ£€æŸ¥ä¼ å…¥ buf çš„æœ€åä¸€ä¸ªå­—èŠ‚çŠ¶æ€</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var j = buf.length - 1;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (j &lt; i)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return 0;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // æ³¨æ„æ­¤å‡½æ•°ã€ç¬¬ä¸€æ¬¡ nb ==Â 3ã€‘</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var nb = utf8CheckByte(buf[j]);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (nb &gt;= 0) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â if (nb &gt; 0)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â Â  Â <span>Â  // lastNeed è®°å½•è¿˜éœ€è¦å‡ ä¸ªå­—èŠ‚é•¿</span></span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â Â Â self.lastNeed = nb - 1;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  Â  // è¿”å›æ€»å­—èŠ‚é•¿</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return nb;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â }</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  . . .</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">}</font><br/></div></div><div><br/></div><div>âœ¨æ¥çœ‹æ ¸å¿ƒåˆ¤æ–­é€»è¾‘ï¼šutf8CheckByteï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// continuation byte.</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">function utf8CheckByte(byte) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // 0x7F == 0111 1111 ã€ç¬¦åˆå•å­—èŠ‚ utf8 ç¼–ç è§„èŒƒï¼Œç›´æ¥è¿”å› 0ã€‘</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (byte &lt;= 0x7F)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return 0;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // 0x06 == 0000 0110 ã€ç¬¦åˆåŒå­—èŠ‚å¼€å§‹è§„èŒƒã€‘</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â else if (byte &gt;&gt; 5 === 0x06)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return 2;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // 0x0E == 0000 1110 ã€ç¬¦åˆä¸‰å­—èŠ‚å¼€å§‹è§„èŒƒã€‘</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â else if (byte &gt;&gt; 4 === 0x0E)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return 3;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // 0x1E == 0001 1110 ã€ç¬¦åˆå››å­—èŠ‚å¼€å§‹è§„èŒƒã€‘</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â else if (byte &gt;&gt; 3 === 0x1E)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return 4;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // éƒ½ä¸ç¬¦åˆï¼Œåˆ™ä¸ºä¸­é—´æœªç»“æŸçŠ¶æ€ï¼Œç­‰å¾…ç»§ç»­ write</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â return -1;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">}</font><br/></div></div><div><br/></div><div>å¦‚ä¸Šä»£ç åˆ†æï¼Œç¬¬ä¸€æ¬¡è¾“å…¥çš„æ˜¯ 0xE6 == 1110 0110 ä¸ºä¸‰å­—èŠ‚å¼€å§‹å­—èŠ‚ï¼Œæ‰€ä»¥ä»æ—§éœ€è¦å†™å…¥è‡ªå·±çš„ internal buffer ç­‰å¾…å®Œæ•´æ€§åˆ¤æ–­ã€‚</div><div><br/></div><div><hr/></div><div><br/></div><div>æ€»ç»“ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼š</div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:13.5pt;"><span style="background-color:#344134;">decoder</span>.<span style="color:#ffc66d;">write</span>( Buffer.<span style="color:#ffc66d;">from</span>( [ <span style="color:#6897bb;">0xE2 </span>] ) )<span style="color:#cc7832;">;</span>
</pre>æ—¶ï¼Œæ­¤å¥ä»£ç è¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å› ä¸º 0xE2 ä¸ºä¸‰å­—èŠ‚å­—ç¬¦çš„å¼€å§‹å­—èŠ‚ï¼ˆé«˜ä½å­—èŠ‚ï¼‰ï¼Œè§£ç å·¥ä½œè¿˜æœªç»“æŸï¼Œæ‰€ä»¥ä¸èƒ½è¾“å‡ºä»»ä½•å­—ç¬¦ã€‚ä½†æ˜¯ï¼Œæ­¤æ—¶å·²ç»æŠŠ 0xE2 å­˜å…¥ decoder ä¸­çš„ internal buffer ä¸­ï¼Œç­‰å¾…åç»­ write çš„ç»§ç»­è°ƒç”¨ã€‚</div><div><br/></div><div>å¼€å§‹ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ˆ0x82 == 1000 0010ï¼‰ï¼š</div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:13.5pt;"><span style="background-color:#344134;">decoder</span>.<span style="color:#ffc66d;">write</span>( Buffer.<span style="color:#ffc66d;">from</span>( [ <span style="color:#6897bb;">0x82 </span>] ) )<span style="color:#cc7832;">;</span></pre></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">StringDecoder.prototype.write = function(buf) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (buf.length === 0)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return '';</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var r;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var i;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // ç¬¬äºŒæ¬¡è°ƒç”¨åˆ™ä¼šæœ‰ lastNeed è¿™ä¸ªå˜é‡</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  // this.lastNeed === 2</span><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span><span>Â  // this.lastTotal === 3</span><br/></span></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (this.lastNeed) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  Â  // èµ°å…¥ fillLast å‡½æ•°</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â r = this.fillLast(buf);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â if (r === undefined)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â Â Â return '';</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â i = this.lastNeed;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â this.lastNeed = 0;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â } elseÂ </font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  Â  . . .</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  . . .</span><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">};</font><br/></div></div><div><br/></div><div>æ¥çœ‹è¿›å…¥çš„ this.fillLast å‡½æ•°ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><font style="font-size: 12px; color: rgb(51, 51, 51);">// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">function utf8FillLast(buf) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // ç¬¬2æ¬¡ï¼šp == ( 3 - 2 ) == 1</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â const p = this.lastTotal - this.lastNeed;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // æ­¤å‡½æ•°ä¸å†èµ˜è¿°ï¼ŒæŠ½å‡ºå…¶æ³¨é‡Šæ¥çœ‹å°±çŸ¥é“æ˜¯åšä»€ä¹ˆäº†ï¼š</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â Â <font style="font-size: 12px; color: rgb(51, 51, 51);">// Validates as many continuation bytes for a multi-byte UTF-8 character as</font></span></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // needed or are available. If we see a non-continuation byte where we expect</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // one, we "replace" the validated continuation bytes we've seen so far with</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // UTF-8 replacement characters ('\ufffd'), to match v8's UTF-8 decoding</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // behavior. The continuation byte check is included three times in the case</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // where all of the continuation bytes for a character exist in the same buffer.</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // It is also done this way as a slight performance increase instead of using a</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â  // loop.</font><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span/><br/></span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â var r = utf8CheckExtraBytes(this, buf, p);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (r !== undefined)</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return r;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // å¦‚æœä¼ å…¥çš„ buf å·²ç»è¶³å¤Ÿå¼¥åˆå‰©ä½™æ‰€éœ€çš„å­—èŠ‚é•¿ï¼Œåˆ™ç›´æ¥ copy å®Œæ¯•ç„¶åè¿”å› toString() ç»“æœ</span></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (this.lastNeed &lt;= buf.length) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â buf.copy(this.lastChar, p, 0, this.lastNeed);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return this.lastChar.toString(this.encoding, 0, this.lastTotal);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â }</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // å¦åˆ™å†æ¬¡ copy ç¬¬äºŒä¸ª 0x82 å­—èŠ‚ç»™ internal buffer</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â buf.copy(this.lastChar, p, 0, buf.length);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // ä¿®æ­£ lastNeed</span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â this.lastNeed -= buf.length;</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">}</font><br/></div></div><div><br/></div><div>æ€»ç»“ï¼Œåœ¨ç¬¬äºŒæ¬¡è°ƒç”¨ StringDecoder.prototype.write( 0x82 ) ä¹‹åï¼Œå…¶ä¸­çš„ï¼šr = this.fillLast( buf ) ä»æ—§è¿”å› undefined ï¼Œæ•…ç¬¬äºŒæ¬¡ write ä»æ—§è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</div><div><br/></div><div><hr/></div><div><br/></div><div>ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼š</div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:13.5pt;">decoder.<span style="color:#ffc66d;">end</span>( Buffer.<span style="color:#ffc66d;">from</span>( [ <span style="color:#6897bb;">0xAC </span>] ) )
</pre>ç›´æ¥è°ƒç”¨äº† StringDecoder.prototype.end = utf8End å‡½æ•°ï¼š</div><div><br/></div><div/><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">// For UTF-8, a replacement character for each buffered byte of a (partial)</font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">// character needs to be added to the output.</font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">function utf8End(buf) {</font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // é¦–å…ˆè¿›å…¥ this.write å‡½æ•°è°ƒç”¨</span></font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);"><span><span>Â  //Â <font style="font-size: 12px; color: rgb(51, 51, 51);">è§ä¸‹åˆ†æ æœ€ç»ˆ r === "â‚¬"</font></span><br/></span></font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â const r = (buf &amp;&amp; buf.length ? this.write(buf) : 'â€™);</font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  // this.lastNeed å·²ç»å½’ 0</span><br/></font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (this.lastNeed)</font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return r + '\ufffd'.repeat(this.lastTotal - this.lastNeed);</font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â return r;</font></div><div style="color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px;"><font style="font-size: 12px; color: rgb(51, 51, 51);">}</font><br/></div></div><div><br/></div><div>ç¬¬ä¸‰æ¬¡çš„ write è°ƒç”¨ï¼š</div><div><br/></div><div/><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>this.fillLast( bufÂ ) è°ƒç”¨ï¼š</div><div>. . .</div><div><span>Â  // å®Œæˆæœ€åä¸€ä¸ªå­—èŠ‚çš„ copy å·¥ä½œ</span><br/></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â if (this.lastNeed &lt;= buf.length) {</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â buf.copy(this.lastChar, p, 0, this.lastNeed);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);"><span>Â  Â  // å¹¶ä¸”ç›´æ¥ toString è¿”å›æ­¤ 3Â å­—èŠ‚é•¿å­—ç¬¦Â <font style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">â‚¬</font></span><br/></font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â Â Â return this.lastChar.toString(this.encoding, 0, this.lastTotal);</font></div><div><font style="font-size: 12px; color: rgb(51, 51, 51);">Â Â }</font><br/></div><div>. . .</div></div><div><br/></div><div>æœ€ç»ˆ utf8End å‡½æ•°å°†Â â‚¬ ä½œä¸ºæœ€ç»ˆçš„è¾“å‡ºå­—ç¬¦ã€‚æœ¬èŠ‚åˆ†æå®Œæ¯•ã€‚</div><div><br/></div><div><br/></div>

<hr class="tail-hr">
<div class="tail-licenses">
<p>ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å(<a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">åˆ›æ„å…±äº«3.0è®¸å¯è¯</a>)</p>
<p>æ–‡ç« ä½œè€…ï¼šPooky (<a href="mailto:guananddu@icloud.com">guananddu@icloud.com</a>)</p>
<p>æ›´æ–°æ—¥æœŸï¼šThu Dec 29 2016 18:32:30 GMT+0800 (CST)</p>
</div></body></html>